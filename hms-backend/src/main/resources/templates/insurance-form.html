<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insurance Details Form</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link th:href="@{/css/add-insurance.css}" rel="stylesheet">
</head>
<body>
<div class="container">
    <!-- Response Message -->
    <div id="responseMessage" class="mt-3" style="display: none"></div>

    <div class="form-card">
        <div class="form-header">
            <i class="fa-solid fa-file-invoice"></i>
            <h3>Insurance Details</h3>
        </div>

        <form id="insuranceForm" novalidate>
            <div class="form-body">
                <!-- Patient Selection -->
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>Select Patient <span class="required">*</span></label>
                        <select class="form-select" id="patientSelect" required>
                            <option value="">Select Patient</option>
                        </select>
                    </div>
                    <div class="form-group col-md-6">
                        <label>Patient Code</label>
                        <input
                                type="text"
                                class="form-control"
                                id="patientCode"
                                readonly
                        />
                    </div>
                </div>

                <!-- Insurance Selection -->
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>Insurance Name <span class="required">*</span></label>
                        <select
                                class="form-select"
                                id="insuranceSelect"
                                required
                                onchange="onInsuranceChange()"
                        >
                            <option value="">Select Insurance</option>
                        </select>
                    </div>
                    <div class="form-group col-md-6">
                        <label>Insurance Company <span class="required">*</span></label>
                         <input
                                type="text"
                                class="form-control auto-fill-field"
                                id="insuranceCompany"
                                readonly
                        />
                    </div>
                </div>

                <!-- Auto-filled Insurance Details -->
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>Service Tax (%)</label>
                        <input
                                type="number"
                                class="form-control auto-fill-field"
                                id="serviceTax"
                                readonly
                        />
                    </div>
                    <div class="form-group d-flow col-md-6">
                        <label>Discount (%)</label>
                        <input
                                type="number"
                                class="form-control auto-fill-field"
                                id="discount"
                                readonly
                        />
                    </div>
                    <div class="form-group col-md-6">
                        <label>Insurance Code</label>
                        <input
                                type="text"
                                class="form-control auto-fill-field"
                                id="insuranceCode"
                                readonly
                        />
                    </div>
                    <div class="form-group d-flow col-md-6">
                        <label>Hospital Rate (₹)</label>
                        <input
                                type="number"
                                class="form-control"
                                id="hospitalRate"
                                placeholder="0.00"
                                step="0.01"
                                style="width: 100%"
                                onchange="calculateTotal()"
                        />
                    </div>
                </div>

                <!-- Disease Information -->
                <div id="disease-charge-container">
                    <div class="form-row disease-charge-row">
                        <div class="form-group col-md-5">
                            <label>Disease Name</label>
                            <input
                                    type="text"
                                    name="disease_name[]"
                                    class="form-control"
                                    placeholder="Enter disease name"
                            />
                        </div>
                        <div class="form-group col-md-5">
                            <label>Disease Charge (₹)</label>
                            <input
                                    type="number"
                                    name="disease_charge[]"
                                    class="form-control"
                                    placeholder="0.00"
                                    step="0.01"
                                    onchange="calculateTotal()"
                            />
                        </div>
                        <div class="form-group col-md-2">
                            <label>&nbsp;</label>
                            <div class="action-buttons">
                                <button type="button" class="btn-action btn-add">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                                <button type="button" class="btn-action btn-remove">
                                    <i class="fa-solid fa-minus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Rate Information -->
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>Base Insurance Rate (₹)</label>
                        <input
                                type="number"
                                class="form-control auto-fill-field"
                                id="baseInsuranceRate"
                                readonly
                        />
                    </div>
                    <div class="form-group d-flow col-md-6">
                        <label>Final Insurance Rate (₹)</label>
                        <input
                                type="number"
                                class="form-control"
                                id="insuranceRate"
                                placeholder="0.00"
                                step="0.01"
                                style="width: 100%"
                                onchange="calculateTotal()"
                        />
                    </div>
                </div>

                <!-- Total Calculation -->
                <div class="form-row">
                    <div class="form-group col-md-12">
                        <label>Total Amount (₹)</label>
                        <input
                                type="number"
                                class="form-control calculated-field"
                                id="totalAmount"
                                readonly
                        />
                    </div>
                </div>

                <!-- Status and Remarks -->
                <div class="form-group col-md-6">
                    <label>Remark</label>
                    <textarea
                            class="form-control"
                            id="remark"
                            rows="4"
                            placeholder="Enter any remarks..."
                            style="width: 100%"
                    ></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>Status</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input
                                        class="form-check-input"
                                        type="radio"
                                        name="status"
                                        id="statusActive"
                                        value="true"
                                        checked
                                />
                                <label class="form-check-label" for="statusActive"
                                >Active</label
                                >
                            </div>
                            <div class="radio-item">
                                <input
                                        class="form-check-input"
                                        type="radio"
                                        name="status"
                                        id="statusInactive"
                                        value="false"
                                />
                                <label class="form-check-label" for="statusInactive"
                                >Inactive</label
                                >
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-footer d-flex justify-content-center">
                <button type="reset" class="btn btn-reset">Reset</button>
                <button type="button" class="btn btn-save" onclick="submitForm()">
                    Save Insurance Details
                </button>
            </div>
        </form>
    </div>
</div>


<!-- Bootstrap & jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/add-insurance.js}"></script>
</body>
</html>